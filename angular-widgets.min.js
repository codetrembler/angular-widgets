angular.module("templates-dist",["search-input.html","spinner-dots.html","spinner.html"]),angular.module("search-input.html",[]).run(["$templateCache",function(a){a.put("search-input.html",'<input placeholder="{{ placeholder }}"><aw-spinner-dots></aw-spinner-dots><ul ng-click="resultClicked()" ng-if="showResults"><a href="{{ listItem.href }}" ng-repeat="listItem in listItems"><p class="title" ng-bind="listItem.title"></p><p class="subtitle" mathjax-bind="listItem.quickinfo"></p></a></ul>')}]),angular.module("spinner-dots.html",[]).run(["$templateCache",function(a){a.put("spinner-dots.html",'<div><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>')}]),angular.module("spinner.html",[]).run(["$templateCache",function(a){a.put("spinner.html",'<div><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>')}]),angular.module("angular-widgets",["templates-dist", "ngResource"]),angular.module("angular-widgets").directive("awList",["$compile","$http",function(a,b){"use strict";return{restrict:"E",scope:{items:"=",urlItemCount:"@",urlItems:"@"},link:function(c,d){function e(){var b,d,e;for(n=[],o=[],b=0;s>b;b+=1)d=p.clone(),q.append(d),e=c.$new(),n.push(a(d)(e)),n[b].css("top",n[0][0].offsetHeight*b+"px"),o.push(e)}function f(){var a,b=Math.min(s,l.length);for(a=0;b>a;a+=1)o[a].item=l[a];x=n[0][0].offsetHeight,w=x*m,q[0].style.minHeight=w+"px",B=(x*s-d[0].offsetHeight)/2}function g(){e(),r?b.get("/"+c.urlItemCount).success(function(a){m=a,l=[],l[m-1]=void 0,b.get("/"+c.urlItems,{data:{offset:0,count:t*u}}).success(function(a){var b=[0,u].concat(a);Array.prototype.splice.apply(l,b),f()})}):(l=c.items,m=l.length,f())}function h(){var a,e,f;r&&(a=d[0].scrollTop/x,e=Math.ceil(t/2+v)*u-1,a>e&&(f=(v+t)*u,b.get("/"+c.urlItems,{data:{offset:f,count:u}}).success(function(a){var b=[f,u].concat(a);v+=1,Array.prototype.splice.apply(l,b)})))}function i(){var a,b,e=d[0].scrollTop;if(e-y>x){if(a=Math.floor((e-y)/x),e>B){for(b=0;a>b&&(A=z-1+s,A!==m-1);b+=1)n[z%s].css("top",parseInt(n[A%s].css("top"),10)+x+"px"),o[z%s].item=l[A+1],z+=1,A+=1;c.$apply()}y=e-(e-y)%x}}function j(){var a,b,e=d[0].scrollTop;if(y-e>x){if(a=Math.floor((y-e)/x),w-B>e){for(b=0;a>b&&(z=A+1-s,0!==z);b+=1)n[A%s].css("top",parseInt(n[z%s].css("top"),10)-x+"px"),o[A%s].item=l[z-1],z-=1,A-=1;c.$apply()}y=e+(y-e)%x}}function k(){d[0].scrollTop>y?(h(),i()):j()}var l,m,n,o,p=d.children(),q=angular.element('<div class="item-container"></div>'),r=void 0===c.items,s=100,t=5,u=40,v=0,w=0,x=0,y=0,z=0,A=s-1,B=0;p.remove(),p.addClass("item"),d.append(q),d.on("scroll",k),g()}}}]),angular.module("angular-widgets").directive("awSearchInput",["$document","$resource","$location","DomService","Utils",function(a,b,c,d,e){"use strict";return{restrict:"E",templateUrl:"search-input.html",scope:{resultUrl:"@",placeholder:"@",searchViewUrl:"@",onFocus:"=",onBlur:"="},link:function(f,g){function h(){var a,b=n.val();b.length>0?(g.addClass("loading"),a=o.query({pattern:b}),a.$promise.then(function(a){f.listItems=a,f.showResults=!0}).catch(function(){console.error("no results loaded."),f.showResults=!1}).finally(function(){g.removeClass("loading")})):f.$apply(function(){f.showResults=!1})}function i(b){"input"===b.target.localName&&d.elementIsChildOf(b.target,g[0])||(a.off("click",i),f.$apply(function(){f.showResults=!1}))}function j(){f.onBlur&&f.onBlur()}function k(){f.onFocus&&f.onFocus(),a.on("click",i),n.val().length>0&&!f.showResults&&f.$apply(function(){f.showResults=!0})}function l(b){9===b.which?(a.off("click",i),f.$apply(function(){f.showResults=!1})):13===b.which&&f.searchViewUrl&&f.$apply(function(){c.path(f.searchViewUrl).search("pattern="+n.val()),n.val(""),f.showResults=!1,f.listItems=void 0})}function m(){n.on("focus",k),n.on("blur",j),n.on("keydown",l),f.resultUrl&&n.on("input",h)}var n=g.find("input"),o=b(f.resultUrl,null,{query:{method:"GET",params:{pattern:"@pattern"},isArray:!0}});e.assert(n,"SearchInput: input element does not exist."),f.showResults=!1,f.resultClicked=function(){n.val("")},m()}}}]),angular.module("angular-widgets").directive("awSpinnerDots",[function(){"use strict";return{restrict:"E",templateUrl:"spinner-dots.html"}}]),angular.module("angular-widgets").factory("DomService",[function(){"use strict";var a={};return a.elementIsChildOf=function(a,b){for(var c=a;c;){if(c.parentNode===b)return!0;c=c.parentNode}return!1},a}]),angular.module("angular-widgets").factory("Utils",[function(){"use strict";var a={};return a.assert=function(a,b){if(!a)throw new Error("Assert failed: "+b)},a}]);